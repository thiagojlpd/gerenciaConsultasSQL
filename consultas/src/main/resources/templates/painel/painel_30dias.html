<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processos por Dia</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
        body {
          font-family: 'Roboto', sans-serif;
          background-color: #f7f7f7;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
          flex-direction: column;
          overflow: hidden;
        }

        .container {
          background-color: white;
          border-radius: 8px;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
          overflow: hidden;
          width: 70%;
          height: 90%;
          display: flex;
          flex-direction: column;
        }

        .header {
          background: linear-gradient(135deg, #9c88ff, #6a4caf);
          color: white;
          padding: 8px;
          text-align: center;
          font-size: 20px;
        }

        #linechart_material {
          width: 105%;
          height: 65%;
        }

        .table-container {
          width: 100%;
          max-height: 35%;
          overflow-y: auto;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          background-color: #fafafa;
        }

        th,
        td {
          padding: 5px 8px;
          text-align: center;
          border-bottom: 1px solid #ddd;
        }

        th {
          background: linear-gradient(135deg, #f6d1f1, #e9c9d7);
          color: #6a4caf;
          position: sticky;
          top: 0;
          z-index: 1;
        }

        tr:hover {
          background-color: #f1f1f1;
        }

        th.sorted-asc::after {
          content: " \2191";
          /* Seta para cima */
        }

        th.sorted-desc::after {
          content: " \2193";
          /* Seta para baixo */
        }

        .footer {
          background: linear-gradient(135deg, #866ff8, #6a4caf);
          color: white;
          padding: 10px;
          font-size: 14px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
          display: flex;
          flex-wrap: wrap;
          /* Permite a quebra de linha */
          gap: 16px;
          /* EspaÃ§amento entre as mÃ©tricas */
          justify-content: center;
          /* Alinha os itens Ã  esquerda */
          bottom: 0;
        }

        .metric {
          display: flex;
          align-items: center;
          margin-bottom: 8px;
        }

        .label {
          font-weight: bold;
          margin-right: 8px;
        }

        .value {
          font-size: 16px;
          font-weight: normal;
          color: #ffd700;
          /* Dourado suave */
        }

        .footer .metric:last-child {
          margin-bottom: 0;
        }

        .error-message {
          color: red;
          font-size: 16px;
          text-align: center;
          margin-top: 20px;
        }

        .highlight {
          background-color: #f5cffe;
          /* Cor de destaque (amarelo suave) */
        }

        .highlight-day {
          background-color: #f5cffe;
          /* Cor de destaque (amarelo suave) */
        }

        .tooltip {
          position: relative;
          cursor: pointer;
          font-weight: bold;
        }

        .tooltip .tooltiptext {
          visibility: hidden;
          width: 180px;
          background-color: #333;
          color: #e4e4e4;
          text-align: center;
          border-radius: 6px;
          padding: 6px;
          position: absolute;
          z-index: 1;
          bottom: 150%;
          left: 50%;
          transform: translateX(-50%);
          opacity: 0;
          transition: opacity 0.3s;
          font-size: 12px;
          width: 400px;
          text-align: left;
        }

        .tooltip:hover .tooltiptext {
          visibility: visible;
          opacity: 1;
        }



    </style>
</head>

<body>

<div class="container">
    <div class="header">
        Quantidade de Processos por Dia (30 dias)
    </div>

    <div id="linechart_material"></div>

    <div class="table-container">
        <table id="processosTable">
            <thead>
            <tr>
                <th class="sortable" onclick="sortTable(0)">Data de Abertura</th>
                <th class="sortable" onclick="sortTable(1)">Quantidade</th>

            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div class="footer">
      <span class="metric">
        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(Î¼):</span>
          <span id="media" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que a mÃ©dia detecta?</h2>
            <p>
              <strong>ğŸ”¹ TendÃªncia central</strong>: Representa o valor mÃ©dio da quantidade de processos solicitados por
              dia.<br>
              <strong>ğŸ”¹ Comportamento geral</strong>: Indica o nÃ­vel mÃ©dio de demanda ao longo do tempo.<br>
              <strong>ğŸ”¹ ComparaÃ§Ãµes</strong>: Permite avaliar variaÃ§Ãµes ao longo de perÃ­odos diferentes.
            </p>

            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ MÃ©dia alta</span> â†’ O nÃºmero de processos diÃ¡rios tende a ser elevado.<br>
              <span class="alert">ğŸ”¹ MÃ©dia baixa</span> â†’ A demanda diÃ¡ria de processos Ã© relativamente pequena.<br>
              <span class="alert">ğŸ”¹ MÃ©dia estÃ¡vel</span> â†’ A demanda diÃ¡ria nÃ£o varia muito ao longo do tempo.
            </p>

            <h2>âœ” AplicaÃ§Ãµes</h2>
            <p>
              <strong>ğŸ”¹ Planejamento estratÃ©gico</strong>: Estimar a quantidade mÃ©dia de processos para alocar
              recursos.<br>
              <strong>ğŸ”¹ ComparaÃ§Ã£o de perÃ­odos</strong>: Verificar se a demanda aumentou ou diminuiu ao longo do
              tempo.<br>
              <strong>ğŸ”¹ IdentificaÃ§Ã£o de padrÃµes</strong>: Determinar perÃ­odos de alta ou baixa demanda.
            </p>

              <!-- FIM DOS CAMPOS -->
          </span>
        </span>


        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(Mo):</span>
          <span id="moda" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que a moda detecta?</h2>
            <p>
              <strong>ğŸ”¹ O nÃºmero de processos mais frequente</strong>: A moda representa a quantidade de processos que
              ocorre com maior frequÃªncia em diferentes dias.<br>
              <strong>ğŸ”¹ PadrÃ£o mais comum na demanda</strong>: Indica qual Ã© a quantidade tÃ­pica de processos
              registrada com maior repetiÃ§Ã£o.<br>
              <strong>ğŸ”¹ PossÃ­veis agrupamentos na distribuiÃ§Ã£o</strong>: Se houver mais de uma moda (distribuiÃ§Ã£o
              multimodal), pode indicar padrÃµes distintos ao longo do tempo.
            </p>

            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ Moda Ãºnica</span> â†’ HÃ¡ um nÃºmero de processos que ocorre mais frequentemente.<br>
              <span class="alert">ğŸ”¹ MÃºltiplas modas</span> â†’ Existem diferentes valores que aparecem com frequÃªncia
              semelhante, sugerindo variaÃ§Ãµes periÃ³dicas na demanda.<br>
              <span class="alert">ğŸ”¹ Sem moda clara</span> â†’ A quantidade de processos varia muito e nÃ£o hÃ¡ um nÃºmero
              predominante.
            </p>

            <h2>âœ” AplicaÃ§Ãµes</h2>
            <p>
              <strong>ğŸ”¹ IdentificaÃ§Ã£o da carga de trabalho mais recorrente</strong>: Saber qual volume de processos
              ocorre com maior frequÃªncia.<br>
              <strong>ğŸ”¹ Planejamento de equipes</strong>: Se a moda indica um valor comum de processos, as equipes
              podem ser ajustadas para atender essa demanda.<br>
              <strong>ğŸ”¹ DetecÃ§Ã£o de padrÃµes sazonais</strong>: Se houver mÃºltiplas modas, pode indicar variaÃ§Ãµes em
              determinados perÃ­odos (exemplo: mais processos em determinados dias da semana ou meses do ano).
            </p>

              <!-- FIM DOS CAMPOS -->
          </span>
        </span>


        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(Me):</span>
          <span id="mediana" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que a mediana detecta?</h2>
            <p>
              <strong>ğŸ”¹ Quantidade tÃ­pica de processos por dia</strong>: A mediana representa o nÃºmero de processos em
              um dia "tÃ­pico", ou seja, aquele que divide a distribuiÃ§Ã£o em duas metades iguais.<br>
              <strong>ğŸ”¹ ResistÃªncia a variaÃ§Ãµes extremas</strong>: Ao contrÃ¡rio da mÃ©dia, a mediana nÃ£o Ã© afetada por
              dias atÃ­picos com volumes muito altos ou muito baixos de processos.<br>
              <strong>ğŸ”¹ PadrÃ£o real da demanda</strong>: Indica um valor central mais confiÃ¡vel para entender a carga
              diÃ¡ria de trabalho sem ser distorcido por picos isolados.
            </p>

            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ Mediana â‰ˆ MÃ©dia</span> â†’ A distribuiÃ§Ã£o do nÃºmero de processos por dia Ã©
              equilibrada.<br>
              <span class="alert">ğŸ”¹ Mediana < MÃ©dia</span> â†’ HÃ¡ alguns dias com muitos processos, que aumentam a mÃ©dia,
                  mas a maior parte dos dias tem menos solicitaÃ§Ãµes.<br>
                  <span class="alert">ğŸ”¹ Mediana > MÃ©dia</span> â†’ Existem dias com poucos processos, puxando a mÃ©dia
                  para baixo, mas a maioria dos dias tem volumes maiores.
            </p>

            <h2>âœ” AplicaÃ§Ãµes</h2>
            <p>
              <strong>ğŸ”¹ AnÃ¡lise da carga de trabalho</strong>: A mediana mostra o fluxo diÃ¡rio de processos que
              realmente ocorre na maioria dos dias.<br>
              <strong>ğŸ”¹ Planejamento de equipes</strong>: Ajuda a alocar recursos baseando-se no volume tÃ­pico de
              processos.<br>
              <strong>ğŸ”¹ ComparaÃ§Ã£o de perÃ­odos</strong>: Permite verificar se a demanda diÃ¡ria de processos estÃ¡
              aumentando ou diminuindo sem influÃªncia de dias atÃ­picos.
            </p>
          </span>
        </span>



        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(ÏƒÂ²):</span>
          <span id="variancia" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que a variÃ¢ncia detecta?</h2>
            <p>
              <strong>ğŸ”¹ VariaÃ§Ã£o da demanda</strong>: Mede o quanto os valores diÃ¡rios de processos se afastam da
              mÃ©dia.<br>
              <strong>ğŸ”¹ Picos anormais de solicitaÃ§Ã£o</strong>: Indica dias com volume muito acima ou abaixo do
              normal.<br>
              <strong>ğŸ”¹ IdentificaÃ§Ã£o de padrÃµes e sazonalidade</strong>: Detecta perÃ­odos de maior ou menor variaÃ§Ã£o.
            </p>

            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ VariÃ¢ncia baixa</span> â†’ A quantidade de processos por dia Ã© estÃ¡vel.<br>
              <span class="alert">ğŸ”¹ VariÃ¢ncia alta</span> â†’ HÃ¡ muita variaÃ§Ã£o na demanda diÃ¡ria.
            </p>

            <p>
              <strong>ğŸ”¹ VariÃ¢ncia (ÏƒÂ²)</strong>: Mede a dispersÃ£o dos dados em relaÃ§Ã£o Ã  mÃ©dia, mas expressa essa
              variaÃ§Ã£o em unidades ao quadrado.<br>
            </p>

            <h2>âœ” AplicaÃ§Ãµes</h2>
            <p>
              <strong>ğŸ”¹ Planejamento de recursos</strong>: Ajustar equipes conforme a variaÃ§Ã£o da demanda.<br>
              <strong>ğŸ”¹ DefiniÃ§Ã£o de metas realistas</strong>: Adaptar metas Ã  volatilidade do nÃºmero de processos.<br>
              <strong>ğŸ”¹ IdentificaÃ§Ã£o de problemas</strong>: Detectar mudanÃ§as inesperadas no fluxo de processos.
            </p>

              <!-- FIM DOS CAMPOS -->
          </span>
        </span>


        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(Î¼):</span>
          <span id="desvioPadrao" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que o desvio padrÃ£o detecta?</h2>
            <p>
              <strong>ğŸ”¹ VariaÃ§Ã£o da demanda</strong>: Mede o quanto os valores diÃ¡rios de processos se afastam da
              mÃ©dia.
              <strong><br>ğŸ”¹ Picos anormais de solicitaÃ§Ã£o</strong>: Indica dias com volume muito acima ou abaixo do
              normal.
              <strong><br>ğŸ”¹ IdentificaÃ§Ã£o de padrÃµes e sazonalidade</strong>: Detecta perÃ­odos de maior ou menor
              variaÃ§Ã£o.
            </p>
            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ Desvio padrÃ£o baixo</span> â†’ A quantidade de processos por dia Ã© estÃ¡vel.
              <span class="alert">ğŸ”¹ Desvio padrÃ£o alto</span> â†’ HÃ¡ muita variaÃ§Ã£o na demanda diÃ¡ria.
            </p>
            <h2>âœ” AplicaÃ§Ãµes</h2>
            <strong>ğŸ”¹ Planejamento de recursos</strong>: Ajustar equipes conforme a variaÃ§Ã£o da demanda.</li>
              <strong><br>ğŸ”¹ DefiniÃ§Ã£o de metas realistas</strong>: Adaptar metas Ã  volatilidade do nÃºmero de processos.
            <strong><br>ğŸ”¹ IdentificaÃ§Ã£o de problemas</strong>: Detectar mudanÃ§as inesperadas no fluxo de processos.
          </span>
        </span>

        <span class="tooltip">
          <span class="label">&nbsp;&nbsp;&nbsp;(A):</span>
          <span id="amplitude" class="value"></span>
          <span class="tooltiptext">
            <h2>âœ” O que a amplitude detecta?</h2>
            <p>
              <strong>ğŸ”¹ VariaÃ§Ã£o total na quantidade de processos</strong>: Mede a diferenÃ§a entre o maior e o menor nÃºmero de processos abertos em um perÃ­odo.<br>
              <strong>ğŸ”¹ Extremos na demanda</strong>: Indica o intervalo entre os dias de menor e maior volume de processos.<br>
              <strong>ğŸ”¹ IndicaÃ§Ã£o de instabilidade</strong>: Quanto maior a amplitude, maior a flutuaÃ§Ã£o na quantidade diÃ¡ria de processos.
            </p>

            <h2>âœ” Como interpretar?</h2>
            <p>
              <span class="alert">ğŸ”¹ Amplitude baixa</span> â†’ A quantidade de processos varia pouco entre os dias.<br>
              <span class="alert">ğŸ”¹ Amplitude alta</span> â†’ HÃ¡ grande diferenÃ§a entre o menor e o maior nÃºmero de processos registrados.
            </p>

            <h2>âœ” AplicaÃ§Ãµes</h2>
            <p>
              <strong>ğŸ”¹ IdentificaÃ§Ã£o de perÃ­odos crÃ­ticos</strong>: Avaliar se hÃ¡ dias com picos extremos de processos.<br>
              <strong>ğŸ”¹ Planejamento da equipe</strong>: Se a amplitude for alta, pode ser necessÃ¡rio reforÃ§ar a equipe em determinados dias.<br>
              <strong>ğŸ”¹ Monitoramento de mudanÃ§as bruscas</strong>: Uma amplitude elevada pode indicar eventos incomuns ou mudanÃ§as nos padrÃµes de solicitaÃ§Ã£o.
            </p>
              <!-- FIM DOS CAMPOS -->
            <span id="errorMessage" class="error-message"></span>
          </span>
        </span>

      </span>
    </div>

</div>


<script>

    let sortDirection = {
      0: 'asc', // Data de Abertura
      1: 'asc'  // Quantidade
    };

    google.charts.load('current', {
      packages: ['corechart', 'line']
    });

    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
      fetch('http://localhost:8080/api/resultados/sigapce/graph/sigapce-30-dias')
        .then(response => {
          if (!response.ok) {
            throw new Error('Erro ao buscar dados da API');
          }
          return response.json();
        })
        .then(data => {
          if (!Array.isArray(data)) {
            throw new Error("O arquivo JSON nÃ£o contÃ©m um array vÃ¡lido.");
          }

          const chartData = new google.visualization.DataTable();
          chartData.addColumn('string', 'Data');
          chartData.addColumn('number', 'Quantidade');

          let somaQuantidades = 0;
          let numValores = 0;
          const valores = [];
          const frequencias = {};
          const tbody = document.querySelector('#processosTable tbody');
          tbody.innerHTML = ''; // Limpa a tabela antes de adicionar novos dados

          let previousQuantidade = null;

          data.forEach(item => {
            const quantidade = isNaN(Number(item.quantidade)) ? 0 : Number(item.quantidade);
            somaQuantidades += quantidade;
            numValores++;
            valores.push(quantidade);

            // Contagem de frequÃªncia para a moda
            frequencias[quantidade] = (frequencias[quantidade] || 0) + 1;

            chartData.addRow([item.data_abertura, quantidade]);
            //chartData.addRow([formatarData(item.data_abertura), quantidade]);


            // Criar e preencher a tabela novamente
            const row = document.createElement('tr');
            let cellColor = '';

            if (previousQuantidade !== null) {
              if (quantidade > previousQuantidade) {
                cellColor = 'background: linear-gradient(135deg, #90EE90, #2E8B57);';
              } else if (quantidade < previousQuantidade) {
                cellColor = 'background: linear-gradient(135deg, #FF6347, #B22222);';
              } else {
                cellColor = 'background: linear-gradient(135deg, #FFD700, #FFA07A);';
              }
            }

            row.innerHTML = `
            <td>${item.data_abertura}</td>
            <td style="${cellColor}">${quantidade}</td>
          `;
            tbody.appendChild(row);

            previousQuantidade = quantidade;
          });

          const media = Math.round(somaQuantidades / numValores);
          const mediana = calcularMediana(valores);
          const moda = calcularModa(frequencias);
          const variancia = calcularVariancia(valores, media);
          const desvioPadrao = calcularDesvioPadrao(variancia);
          const amplitude = calcularAmplitude(valores);

          const limiteSuperior = media + desvioPadrao;
          const limiteInferior = media - desvioPadrao;

          // Atualizar o rodapÃ© com os valores estatÃ­sticos
          document.getElementById('media').innerText = media;
          document.getElementById('moda').innerText = moda;
          document.getElementById('mediana').innerText = Math.round(mediana);
          document.getElementById('variancia').innerText = variancia.toFixed(2);
          document.getElementById('desvioPadrao').innerText = desvioPadrao.toFixed(2);
          document.getElementById('amplitude').innerText = amplitude;

          // Criando a tabela de dados combinada com mÃ©dia e desvios padrÃ£o
          const combinedData = new google.visualization.DataTable();
          combinedData.addColumn('string', 'Data');
          combinedData.addColumn('number', 'Quantidade');
          combinedData.addColumn('number', 'MÃ©dia');
          combinedData.addColumn('number', 'MÃ©dia + Î¼');
          combinedData.addColumn('number', 'MÃ©dia - Î¼');

          data.forEach(item => {
            const quantidade = isNaN(Number(item.quantidade)) ? 0 : Number(item.quantidade);
            combinedData.addRow([item.data_abertura, quantidade, media, limiteSuperior, limiteInferior]);
          });

          const options = {
            title: 'Quantidade de Processos por Dia (30 dias)',
            curveType: 'function',
            legend: { position: 'bottom' },
            hAxis: { title: 'Data', format: 'dd/MM/yyyy' },
            vAxis: {
              title: 'Quantidade de Processos',
              minValue: -10 // Define o valor mÃ­nimo para o eixo Y como -10
            },
            series: {
              0: { color: '#6a4caf' },
              1: { color: '#FFD700', lineWidth: 2, lineDashStyle: [4, 4] },
              2: { color: '#32CD32', lineWidth: 2, lineDashStyle: [4, 4] },
              3: { color: '#FF4500', lineWidth: 2, lineDashStyle: [4, 4] }
            },
            animation: {
              startup: true, // Ativa a animaÃ§Ã£o de entrada
              easing: 'inAndOut', // Tipo de animaÃ§Ã£o
              duration: 1000 // DuraÃ§Ã£o da animaÃ§Ã£o (em milissegundos)
            }
          };


          const chart = new google.visualization.LineChart(document.getElementById('linechart_material'));
          chart.draw(combinedData, options);

          // Evento para destacar linha na tabela ao clicar no grÃ¡fico
          google.visualization.events.addListener(chart, 'select', function () {
            const selectedItem = chart.getSelection()[0];
            if (selectedItem) {
              const rowIndex = selectedItem.row; // ObtÃ©m o Ã­ndice da linha do grÃ¡fico
              highlightTableRow(rowIndex); // Destaca a linha correspondente na tabela
            }
          });

          // FunÃ§Ã£o para destacar a linha correspondente na tabela apÃ³s o clique no grÃ¡fico
          function highlightTableRow(rowIndex) {
            const rows = document.querySelectorAll('#processosTable tbody tr');
            rows.forEach(row => row.classList.remove('highlight')); // Remove o destaque de outras linhas

            // Procurar a linha correspondente Ã  posiÃ§Ã£o da linha no grÃ¡fico
            const selectedRow = rows[rowIndex];
            if (selectedRow) {
              selectedRow.classList.add('highlight'); // Adiciona destaque Ã  linha correspondente
              selectedRow.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Rola atÃ© a linha
            }
          }

        })
        .catch(error => {
          document.getElementById('errorMessage').innerText = `Erro: ${error.message}`;
          console.error('Erro:', error);
        });
    }

    // FunÃ§Ãµes para cÃ¡lculos estatÃ­sticos
    function calcularMediana(valores) {
      valores.sort((a, b) => a - b);
      const meio = Math.floor(valores.length / 2);
      return valores.length % 2 === 0 ? (valores[meio - 1] + valores[meio]) / 2 : valores[meio];
    }

    function calcularModa(frequencias) {
      return Object.keys(frequencias).reduce((a, b) => frequencias[a] > frequencias[b] ? a : b);
    }

    function calcularVariancia(valores, media) {
      const somaQuadrados = valores.reduce((acc, val) => acc + Math.pow(val - media, 2), 0);
      return somaQuadrados / valores.length;
    }

    function calcularDesvioPadrao(variancia) {
      return Math.sqrt(variancia);
    }

    function calcularAmplitude(valores) {
      const min = Math.min(...valores);
      const max = Math.max(...valores);
      return max - min;
    }

    // FunÃ§Ã£o para ordenar a tabela
    function sortTable(columnIndex) {
      const table = document.getElementById("processosTable");
      const rows = Array.from(table.rows).slice(1); // Pega as linhas, excluindo o cabeÃ§alho
      const isAscending = sortDirection[columnIndex] === 'asc';

      rows.sort((rowA, rowB) => {
        const cellA = rowA.cells[columnIndex].innerText;
        const cellB = rowB.cells[columnIndex].innerText;

        if (columnIndex === 2) { // Quantidade
          return isAscending ? cellA - cellB : cellB - cellA;
        } else { // Data de Abertura
          return isAscending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
        }
      });

      // Adiciona as linhas ordenadas na tabela
      rows.forEach(row => table.appendChild(row));

      // Atualiza a direÃ§Ã£o da ordenaÃ§Ã£o e as setas
      sortDirection[columnIndex] = isAscending ? 'desc' : 'asc';
    }

    function updateSortArrows(sortedIndex) {
      const headers = document.querySelectorAll('th');
      headers.forEach((header, index) => {
        header.classList.remove('sorted-asc', 'sorted-desc');
        if (index === sortedIndex) {
          header.classList.add(sortDirection[index] === 'asc' ? 'sorted-asc' : 'sorted-desc');
        }
      });
    }

</script>

</body>

</html>